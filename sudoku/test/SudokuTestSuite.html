<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <title>Sudoku Test Suite</title>
    <link rel="stylesheet" href="qunit-1.11.0.css">
</head>
<body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <script src="qunit-1.11.0.js"></script>
    <script src="../main/Sudoku.js"></script>
    <script>
	    module("Sudoku.sudokuInterface Construction Tests");
	    test("Successful Construction Test, width is the only parameter", function() {
	    	
	    	//Construction with width === 900 pixels
	    	var width = 900;
	    	var sudokuInterface = Sudoku.sudokuInterface(width);
	    	var expectedInterfaceWidth = (sudokuInterface.getCountOfTiles() * sudokuInterface.calculateTileWidth(width)) +
	    	   (sudokuInterface.getCountOfDividers() * sudokuInterface.calculateDividerWidth(width));
            ok(!sudokuInterface.getError() , "construction was successful with width " + width);
	    	ok(sudokuInterface.getWidth() === expectedInterfaceWidth, "interface constructed using width (type " + typeof width +  ") " + 
	    		    width + " pixels succeeded with expectedInterfaceWidth (type " + typeof expectedInterfaceWidth + ") " + expectedInterfaceWidth);
	    	ok(sudokuInterface.getWidth() === sudokuInterface.getWidth(), "interface constructed using width (type " + typeof width +  ") " + 
                    width + " pixels succeeded with sudokuInterface.getWidth() (type " + typeof sudokuInterface.getWidth() + ") " + sudokuInterface.getWidth());
	    	
	        //Construction with width === 300 pixels
	    	width = 300;
            sudokuInterface = Sudoku.sudokuInterface(width);
            expectedInterfaceWidth = (sudokuInterface.getCountOfTiles() * sudokuInterface.calculateTileWidth(width)) +
               (sudokuInterface.getCountOfDividers() * sudokuInterface.calculateDividerWidth(width));
            ok(!sudokuInterface.getError() , "construction was successful with width " + width);
            ok(sudokuInterface.getWidth() === expectedInterfaceWidth, "interface constructed using width (type " + typeof width +  ") " + 
                    width + " pixels succeeded with expectedInterfaceWidth (type " + typeof expectedInterfaceWidth + ") " + expectedInterfaceWidth);
            ok(sudokuInterface.getWidth() === sudokuInterface.getWidth(), "interface constructed using width (type " + typeof width +  ") " + 
                    width + " pixels succeeded with sudokuInterface.getWidth() (type " + typeof sudokuInterface.getWidth() + ") " + sudokuInterface.getWidth());
            
            //Construction with width === 1200 pixels
            width = 1200;
            sudokuInterface = Sudoku.sudokuInterface(width);
            expectedInterfaceWidth = (sudokuInterface.getCountOfTiles() * sudokuInterface.calculateTileWidth(width)) +
               (sudokuInterface.getCountOfDividers() * sudokuInterface.calculateDividerWidth(width));
            ok(!sudokuInterface.getError() , "construction was successful with width " + width);
            ok(sudokuInterface.getWidth() === expectedInterfaceWidth, "interface constructed using width (type " + typeof width +  ") " + 
                    width + " pixels succeeded with expectedInterfaceWidth (type " + typeof expectedInterfaceWidth + ") " + expectedInterfaceWidth);
            ok(sudokuInterface.getWidth() === sudokuInterface.getWidth(), "interface constructed using width (type " + typeof width +  ") " + 
                    width + " pixels succeeded with sudokuInterface.getWidth() (type " + typeof sudokuInterface.getWidth() + ") " + sudokuInterface.getWidth());
	    });
	    
	    test("Failed Construction Test", function() {
	    	
	    	var nullParameter = null;
	    	var undefinedParameter;
	    	var negativeIntegerParameter = -5;
	    	var negativeFloatParameter = -3.14;
	    	var zeroParameter = 0;
	    	var smallPositiveIntegerParameter = 5;
	    	var smallPositiveFloatParameter = 3.14;
	    	var largePositiveIntegerParameter = 900;
	    	var largePositiveFloatParameter = 1000.99;
	    	
	    	function isFloat(value) {
	    		if ( (typeof value === 'number') && (value !== Math.floor(value)) ) {
	    			return true;
	    		}
	    		else {
	    			return false;
	    		}
	    	}
	    	
	        function isPositive(value) {
                if ( (typeof value === 'number') && (value > 0) ) {
                    return true;
                }
                else {
                    return false;
                }
            }
	    	
	        function isNegative(value) {
                if ( (typeof value === 'number') && (value < 0) ) {
                    return true;
                }
                else {
                    return false;
                }
            }
	        
	    	function testParameterString() {
	    		
	    		var i;
	    		var argumentStrings = [];
	    		var type;
	    		var subtype;
	    		var value;
	    		for( i = 0; i < arguments.length; i++ ) {
	    			
	    			type = typeof arguments[i];
	    			subtype = '';
	    			value = arguments[i];
	    			
	    			if (type === 'number') {
	    								
	    				if ( value === 0 ) {
	    					subtype = 'zero';
	    				}
	    				else if ( isPositive(value) && isFloat(value) ) {
	    					subtype = 'positive float ';
	    				}
	    				else if ( isNegative(value) && isFloat(value) ) {
                            subtype = 'negative float ';
                        }
	    				else if ( isPositive(value) && !isFloat(value) ) {
                            subtype = 'positive integer ';
                        }
                        else if ( isNegative(value) && !isFloat(value) ) {
                            subtype = 'negative integer ';
                        }
	    				
	    				value = " " + value;
	    			}
	    			else if ( (type == 'object') && (value === null) ) {
	    			    value = " " + value;
	    			}
	    			else if ( type === 'undefined' ) {
	    				value = "";
	    			}
	    			
	    			argumentStrings.push( "(" + subtype + type + value + ")" );
	    		}
	    		
	    		var paramString = arguments.length + " arguments: { ";
	    		for ( i = 0; i < argumentStrings.length; i++ ) {
	    			
	    			paramString = paramString + argumentStrings[i];
	    			
	    			if ( i !== argumentStrings.length - 1 ) {
	    			    paramString = paramString + ', ';	
	    			}

	    		}
	    		paramString = paramString + " }, ";
	    		return paramString;
	    	};
	    	
	    	function failedConstruction() {
	    		var sudokuInterface = Sudoku.sudokuInterface.apply(null, arguments);
	            ok(sudokuInterface.getError(), testParameterString.apply(null, arguments) + "so construction failed, error is: " + sudokuInterface.getError());
	    	}
	    	
	    	//Construction, no arguments
	    	failedConstruction();
            
            //Construction, width one parameter, different values
            failedConstruction(undefinedParameter);
            failedConstruction(nullParameter);
            failedConstruction(negativeIntegerParameter);
            failedConstruction(negativeFloatParameter);
            failedConstruction(zeroParameter);
            failedConstruction(smallPositiveFloatParameter);
            failedConstruction(smallPositiveIntegerParameter);
            failedConstruction(largePositiveFloatParameter);
            
            //Construction, two paramters, different values
            failedConstruction(undefinedParameter, undefinedParameter);
            failedConstruction(undefinedParameter, nullParameter);
            failedConstruction(nullParameter, nullParameter);
            failedConstruction(nullParameter, undefinedParameter);
            failedConstruction(negativeIntegerParameter, smallPositiveIntegerParameter);
            failedConstruction(negativeIntegerParameter, largePositiveFloatParameter);
            failedConstruction(negativeIntegerParameter, undefinedParameter);
            failedConstruction(smallPositiveIntegerParameter, undefinedParameter);
            failedConstruction(smallPositiveIntegerParameter, nullParameter);
            failedConstruction(largePositiveIntegerParameter, smallPositiveFloatParameter);
            failedConstruction(largePositiveIntegerParameter, negativeFloatParameter);
            failedConstruction(largePositiveIntegerParameter, negativeIntegerParameter);
            failedConstruction(largePositiveFloatParameter, undefinedParameter);
            failedConstruction(largePositiveFloatParameter, nullParameter);
            failedConstruction(largePositiveFloatParameter, smallPositiveIntegerParameter);
            
            //Construction, three parameters, different values 
            failedConstruction(undefinedParameter, undefinedParameter, undefinedParameter);
            failedConstruction(undefinedParameter, nullParameter, nullParameter);
            failedConstruction(undefinedParameter, smallPositiveIntegerParameter, smallPositiveIntegerParameter);
            failedConstruction(nullParameter, nullParameter, nullParameter);
            failedConstruction(nullParameter, undefinedParameter, undefinedParameter);
            failedConstruction(nullParameter, smallPositiveIntegerParameter, smallPositiveIntegerParameter);
            failedConstruction(negativeIntegerParameter, smallPositiveIntegerParameter, smallPositiveIntegerParameter);
            failedConstruction(negativeIntegerParameter, undefinedParameter, undefinedParameter);
            failedConstruction(negativeIntegerParameter, nullParameter, nullParameter);
            failedConstruction(largePositiveFloatParameter, smallPositiveIntegerParameter, smallPositiveIntegerParameter);
            failedConstruction(largePositiveIntegerParameter, undefinedParameter, smallPositiveIntegerParameter);
            failedConstruction(largePositiveIntegerParameter, smallPositiveIntegerParameter, undefinedParameter);
            failedConstruction(largePositiveIntegerParameter, nullParameter, smallPositiveIntegerParameter);
            failedConstruction(largePositiveIntegerParameter, smallPositiveIntegerParameter, nullParameter);
            failedConstruction(largePositiveIntegerParameter, smallPositiveFloatParameter, smallPositiveIntegerParameter);
            failedConstruction(largePositiveIntegerParameter, smallPositiveIntegerParameter, smallPositiveFloatParameter);
            failedConstruction(largePositiveIntegerParameter, smallPositiveFloatParameter, smallPositiveFloatParameter);
            failedConstruction(largePositiveFloatParameter, smallPositiveIntegerParameter, smallPositiveIntegerParameter);
	    });
	    
	    module("Sudoku.sudokuInterface.getError() Tests");
	    test("Tests that don't generate errors", function() {
	    	
	    	var sudokuInterface = Sudoku.sudokuInterface(900);
	    	ok(!sudokuInterface.getError(), "no errors generated from proper construction");
	    	
	    	sudokuInterface.setMinimumTileWidth(20);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to setMinimumTileWidth()");
            
            sudokuInterface.setMinimumDividerWidth(2);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to setMinimumDividerWidth()");
	    	
	    	sudokuInterface.calculateMinimumWidth(20, 2);
	    	ok(!sudokuInterface.getError(), "no errors generated from proper call to calculateMinimumWidth()");
	    	
	    	sudokuInterface.resize(2000);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to resize()");
	    });
	    
	    test("Error From bad construction parameters", function() {
            
            var sudokuInterface = Sudoku.sudokuInterface(900.99);
            ok(sudokuInterface.getError(), "error from bad construction: " + sudokuInterface.getError());
            
        });
	    
	    test("Errors from bad calls after proper construction", function() {
            
            var sudokuInterface = Sudoku.sudokuInterface(900);
            ok(!sudokuInterface.getError(), "no errors generated from proper construction");
            sudokuInterface.setMinimumTileWidth(20.99);
            ok(sudokuInterface.getError(), "error generated from proper call to setMinimumTileWidth(): " + sudokuInterface.getError());
            
            sudokuInterface = Sudoku.sudokuInterface(900);
            ok(!sudokuInterface.getError(), "no errors generated from proper construction");
            sudokuInterface.setMinimumDividerWidth(-2);
            ok(sudokuInterface.getError(), "error generated from proper call to setMinimumDividerWidth(): " + sudokuInterface.getError());
            
            sudokuInterface = Sudoku.sudokuInterface(900);
            ok(!sudokuInterface.getError(), "no errors generated from proper construction");
            sudokuInterface.calculateMinimumWidth(20.3, -2);
            ok(sudokuInterface.getError(), "error generated from proper call to calculateMinimumWidth(): " + sudokuInterface.getError());
            
            sudokuInterface = Sudoku.sudokuInterface(900);
            ok(!sudokuInterface.getError(), "no errors generated from proper construction");
            sudokuInterface.resize(null);
            ok(sudokuInterface.getError(), "error generated from proper call to resize(), error string is: " + sudokuInterface.getError());
        });
	    
	    test("Successful calls clear errors", function() {
            
            var sudokuInterface = Sudoku.sudokuInterface(900);
            ok(!sudokuInterface.getError(), "no errors generated from proper construction");
            
            sudokuInterface.setMinimumTileWidth(20.99);
            ok(sudokuInterface.getError(), "error generated from proper call to setMinimumTileWidth(): " + sudokuInterface.getError());
            sudokuInterface.setMinimumTileWidth(20);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to setMinimumTileWidth()");
            
            sudokuInterface.setMinimumDividerWidth(-2);
            ok(sudokuInterface.getError(), "error generated from proper call to setMinimumDividerWidth(): " + sudokuInterface.getError());
            sudokuInterface.setMinimumDividerWidth(2);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to setMinimumDividerWidth()");
            
            sudokuInterface.calculateMinimumWidth(20.3, -2);
            ok(sudokuInterface.getError(), "error generated from proper call to calculateMinimumWidth(): " + sudokuInterface.getError());
            sudokuInterface.calculateMinimumWidth(20, 2);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to calculateMinimumWidth()");
            
            sudokuInterface.resize(null);
            ok(sudokuInterface.getError(), "error generated from proper call to resize(), error string is: " + sudokuInterface.getError());
            sudokuInterface.resize(2000);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to resize()");
            
            sudokuInterface.calculateMinimumWidth(20.3, -2);
            ok(sudokuInterface.getError(), "error generated from proper call to calculateMinimumWidth(): " + sudokuInterface.getError());
            sudokuInterface.resize(2000);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to resize()");
            
            sudokuInterface.setMinimumDividerWidth(-2);
            ok(sudokuInterface.getError(), "error generated from proper call to setMinimumDividerWidth(): " + sudokuInterface.getError());
            sudokuInterface.calculateMinimumWidth(20, 2);
            ok(!sudokuInterface.getError(), "no errors generated from proper call to calculateMinimumWidth()");
        });
	    
	    module("Sudoku.sudokuInterface getCountOfTiles() and getCountOfDividers()");
	    test("Count of Tiles is 9, Count of Dividers is 10", function() {
	        var sudokuInterface = Sudoku.sudokuInterface(900);
	        ok(!sudokuInterface.getError(), "no errors generated from proper construction");
	            
	        ok(sudokuInterface.getCountOfTiles() === 9, "Count of tiles is always 9, output from getCountOfTiles() is: " + sudokuInterface.getCountOfTiles());
	        ok(sudokuInterface.getCountOfDividers() === 10, "Count of dividers is always 10, output from getCountOfDividers() is: " + sudokuInterface.getCountOfDividers());
	    });
    </script>
</body>
</html>